/**
 * Filename: src/app/components/BottomNavigation.tsx
 * Version : V1.4.2
 * Update  : 2026-02-11
 * Remarks : 
 * V1.4.2 - SVGインライン化によりインポートエラーを解消。
 * V1.4.1 - SVGインライン化。currentColorによるアクティブカラー制御。
 * V1.2.0 - SVGアイコン採用。CSSによる動的な色変更に対応。
 * V1.0.0 - 5項目メニューの実装。テストV1.1.0に対応。
 */

"use client";

import React from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { baseStyles } from '@/types/styles/style_common';

// --- 各アイコンのコンポーネント定義 (内部のfillをcurrentColorに修正) ---
const NewsIcon = ({ style }: { style?: React.CSSProperties }) => (
  <svg viewBox="0 0 512 512" style={style}>
    <g fill="currentColor" stroke="none" transform="translate(0,512) scale(0.1,-0.1)">
      <path d="M645 4475 l-25 -24 0 -1715 0 -1714 31 -26 c17 -14 39 -26 50 -26 28
      0 75 26 83 45 3 9 6 786 6 1726 l0 1710 -25 24 c-33 34 -87 34 -120 0z"/>
      <path d="M970 2752 l0 -1749 -30 -60 c-48 -97 -128 -145 -237 -145 -77 -1
      -136 26 -192 87 -76 83 -71 -44 -71 1762 0 1137 -3 1620 -11 1635 -6 11 -26
      26 -44 34 -39 16 -69 8 -100 -26 -20 -22 -20 -38 -23 -1609 -2 -1048 1 -1613
      8 -1666 20 -159 114 -290 257 -358 l68 -32 1930 -3 c1437 -2 1944 0 1985 8
      174 37 313 190 340 375 6 45 10 686 10 1783 l0 1712 -1945 0 -1945 0 0 -1748z
      m3710 -70 c0 -1844 5 -1714 -71 -1797 -23 -24 -62 -54 -87 -67 l-47 -23 -1702
      -3 c-937 -1 -1703 1 -1703 4 0 4 13 34 30 68 16 33 34 85 40 115 6 35 10 640
      10 1702 l0 1649 1765 0 1765 0 0 -1648z"/>
      <path d="M1510 3885 l0 -85 1410 0 1410 0 0 85 0 85 -1410 0 -1410 0 0 -85z"/>
      <path d="M1510 3355 l0 -85 1410 0 1410 0 0 85 0 85 -1410 0 -1410 0 0 -85z"/>
      <path d="M1500 2825 l0 -85 530 0 530 0 0 85 0 85 -530 0 -530 0 0 -85z"/>
      <path d="M2920 2295 l0 -615 705 0 705 0 0 615 0 615 -705 0 -705 0 0 -615z
      m1230 0 l0 -445 -527 2 -528 3 -3 443 -2 442 530 0 530 0 0 -445z"/>
      <path d="M1510 2295 l0 -85 525 0 525 0 0 85 0 85 -525 0 -525 0 0 -85z"/>
      <path d="M1510 1765 l0 -85 525 0 525 0 0 85 0 85 -525 0 -525 0 0 -85z"/>
      <path d="M1510 1235 l0 -85 1410 0 1410 0 0 85 0 85 -1410 0 -1410 0 0 -85z"/>
    </g>
  </svg>
);

const EventIcon = ({ style }: { style?: React.CSSProperties }) => (
  <svg viewBox="0 0 5800 5800" style={style}>
    <path
      fill="currentColor"
      d="M900 2300l0 3000 4000 0 0 -3000 -4000 0zm400 -1800c0,-55 45,-100 100,-100 55,0 100,45 100,100l0 200 400 0 0 -200c0,-55 45,-100 100,-100 55,0 100,45 100,100l0 200 400 0 0 -200c0,-55 45,-100 100,-100 55,0 100,45 100,100l0 200 400 0 0 -200c0,-55 45,-100 100,-100 55,0 100,45 100,100l0 200 400 0 0 -200c0,-55 45,-100 100,-100 55,0 100,45 100,100l0 200 400 0 0 -200c0,-55 45,-100 100,-100 55,0 100,45 100,100l0 200 300 0c165,0 300,135 300,300 0,1500 0,3000 0,4500l-4400 0c0,-1500 0,-3000 0,-4500 0,-165 135,-300 300,-300l300 0 0 -200zm200 400l0 127c62,35 100,101 100,173 0,110 -90,200 -200,200 -110,0 -200,-90 -200,-200 0,-72 38,-137 100,-173l0 -127 -300 0c-55,0 -100,45 -100,100l0 1100 4000 0 0 -1100c0,-55 -45,-100 -100,-100l-300 0 0 127c62,35 100,101 100,173 0,110 -90,200 -200,200 -110,0 -200,-90 -200,-200 0,-72 38,-138 100,-173l0 -127 -400 0 0 127c62,35 100,101 100,173 0,110 -90,200 -200,200 -110,0 -200,-90 -200,-200 0,-72 38,-137 100,-173l0 -127 -400 0 0 127c62,36 100,101 100,173 0,110 -90,200 -200,200 -110,0 -200,-90 -200,-200 0,-72 38,-138 100,-173l0 -127 -400 0 0 127c62,35 100,101 100,173 0,110 -90,200 -200,200 -110,0 -200,-90 -200,-200 0,-72 38,-137 100,-173l0 -127 -400 0z"
    />
    <path
      fill="currentColor"
      d="M1700 3400c0,-275 225,-500 500,-500l400 0c276,0 500,225 500,500 0,158 -75,306 -200,400 125,94 200,242 200,400 0,275 -225,500 -500,500l-400 0c-275,0 -500,-225 -500,-500l200 0c0,165 135,300 300,300l400 0c165,0 300,-135 300,-300 0,-165 -135,-300 -300,-300l-200 0 0 -200 200 0c165,0 300,-135 300,-300 0,-165 -135,-300 -300,-300l-400 0c-165,0 -300,135 -300,300l-200 0zm1800 -500l400 0 0 1800 -200 0 0 -1600 -200 0 0 -200z"
    />
  </svg>
);

const AccountingIcon = ({ style }: { style?: React.CSSProperties }) => (
  <svg viewBox="0 0 512 512" style={style}>
    <g
      fill="currentColor"
      stroke="none"
      transform="translate(0,512) scale(0.1,-0.1)"
    >
      <path d="M267 4143 c-10 -9 -9 -1753 1 -1753 4 0 15 12 24 28 9 15 46 62 82
      104 l66 77 0 334 0 334 93 22 c234 55 427 209 532 426 39 82 75 195 75 238 0
      16 95 17 1420 17 1325 0 1420 -1 1420 -17 0 -43 36 -156 75 -238 105 -217 298
      -371 533 -426 l92 -22 0 -531 0 -531 -82 -17 c-54 -11 -119 -35 -188 -69 -92
      -46 -117 -64 -201 -148 -84 -84 -102 -109 -148 -201 -34 -69 -58 -134 -69
      -188 l-17 -82 -102 0 c-118 0 -109 9 -90 -105 l12 -70 530 0 530 0 0 1410 0
      1410 -2291 3 c-1260 1 -2294 -1 -2297 -5z m693 -195 c-1 -42 -48 -158 -91
      -224 -79 -121 -219 -223 -355 -259 -32 -8 -62 -15 -66 -15 -4 0 -8 117 -8 260
      l0 260 260 0 260 0 0 -22z m3720 -238 c0 -143 -4 -260 -8 -260 -4 0 -34 7 -66
      15 -136 36 -276 138 -355 259 -43 66 -90 182 -91 224 l0 22 260 0 260 0 0
      -260z m0 -1950 l0 -260 -260 0 c-298 0 -275 -10 -240 101 39 128 149 268 264
      338 59 35 178 80 214 81 l22 0 0 -260z"/>
      <path d="M2468 3790 c-296 -35 -570 -265 -698 -585 -37 -92 -75 -235 -85 -320
      l-6 -60 85 -42 85 -42 6 57 c12 116 28 199 51 270 86 262 261 449 494 528 40
      14 84 19 160 19 76 0 120 -5 160 -19 199 -67 352 -209 449 -418 123 -261 127
      -592 11 -862 -11 -27 -19 -50 -18 -51 24 -20 142 -84 148 -80 15 9 72 158 97
      254 34 130 43 364 19 498 -82 472 -392 808 -786 853 -47 5 -89 9 -95 9 -5 -1
      -40 -5 -77 -9z"/>
      <path d="M1115 2729 c-228 -29 -465 -154 -607 -321 -162 -190 -239 -397 -239
      -643 0 -175 30 -298 110 -453 180 -345 563 -552 949 -512 107 11 222 40 229
      56 3 9 -32 152 -39 159 -2 2 -37 -6 -78 -18 -101 -27 -294 -29 -395 -3 -426
      109 -683 537 -579 966 22 91 93 233 154 307 100 123 249 220 406 265 112 32
      305 32 417 0 190 -54 351 -171 453 -328 21 -32 39 -60 40 -62 2 -4 139 89 142
      97 4 13 -73 124 -129 185 -152 167 -371 277 -609 306 -95 11 -126 11 -225 -1z"/>
      <path d="M2565 2204 c-269 -39 -442 -121 -610 -291 -169 -171 -261 -384 -272
      -631 -14 -299 84 -542 302 -750 180 -174 407 -264 665 -263 193 0 348 43 510
      143 97 59 227 183 287 273 196 293 226 651 79 961 -53 112 -89 165 -169 251
      -140 149 -311 246 -509 288 -71 15 -233 26 -283 19z m227 -188 c381 -73 648
      -395 648 -781 0 -545 -529 -922 -1049 -749 -117 39 -205 96 -306 198 -156 156
      -226 327 -227 546 -1 74 5 139 15 182 42 175 138 329 272 437 184 149 420 210
      647 167z"/>
      <path d="M2470 1500 l0 -90 45 0 45 0 0 -310 0 -311 88 3 87 3 3 398 2 397
      -135 0 -135 0 0 -90z"/>
      <path d="M1060 2030 l0 -90 45 0 45 0 0 -310 0 -310 85 0 85 0 0 400 0 400
      -130 0 -130 0 0 -90z"/>
    </g>
  </svg>
);

const AssetIcon = ({ style }: { style?: React.CSSProperties }) => (
  <svg viewBox="0 0 3891 3887" style={style}>
    <g
      fill="currentColor"
      stroke="none"
      transform="translate(0,3887) scale(0.1,-0.1)"
    >
      {/* pickleball_ai.svg の g 内の path をそのまま貼り付け */}
      <path d="M18670 38850 c-2231 -98 -4332 -537 -6440 -1345 -1243 -477 -2415
      -1082 -3545 -1830 -854 -566 -1673 -1210 -2460 -1934 -230 -213 -824 -803
      -1036 -1032 -2259 -2427 -3861 -5324 -4649 -8404 -307 -1199 -478 -2363 -530
      -3605 -18 -427 -10 -1222 16 -1570 l6 -86 516 -103 c285 -56 529 -105 543
      -108 l26 -5 7 99 c62 886 318 1564 756 2003 351 352 822 540 1350 540 951 -1
      1942 -607 2331 -1425 342 -719 183 -1466 -451 -2118 -218 -226 -392 -305
      -1072 -492 -597 -165 -821 -253 -1016 -402 -221 -169 -296 -403 -222 -688 91
      -345 339 -517 750 -517 474 0 1098 235 1720 647 321 212 529 383 806 659 496
      496 750 936 818 1421 51 355 69 758 47 1045 -29 383 -105 743 -227 1074 -69
      185 -219 481 -331 651 -138 209 -241 334 -427 520 -577 575 -1340 922 -2266
      1031 -186 21 -656 30 -861 15 -387 -28 -808 -105 -1195 -217 -26 -7 -30 -41
      43 321 530 2630 1635 5095 3245 7242 790 1054 1742 2063 2762 2927 1971 1669
      4286 2907 6771 3621 2767 795 5673 916 8477 354 2797 -560 5500 -1815 7733
      -3589 878 -698 1715 -1495 2440 -2325 1990 -2276 3343 -4948 3915 -7731 48
      -236 151 -816 145 -822 -1 -2 -142 17 -311 42 -337 49 -637 86 -894 112 -221
      22 -795 30 -983 15 -848 -71 -1492 -366 -2102 -963 -235 -229 -359 -386 -524
      -663 -160 -269 -268 -505 -366 -800 -110 -329 -151 -568 -142 -815 4 -97 13
      -173 27 -230 68 -275 242 -445 515 -501 145 -30 383 -22 578 19 117 24 142 33
      168 58 66 63 117 205 164 459 76 410 99 521 130 640 88 339 213 601 386 810
      210 256 509 439 879 541 287 79 529 109 828 101 342 -8 575 -63 856 -204 684
      -341 1116 -1102 1116 -1966 0 -263 -35 -489 -110 -719 -145 -442 -414 -787
      -795 -1019 -168 -102 -306 -149 -765 -260 -597 -143 -808 -225 -956 -373 -67
      -68 -99 -125 -114 -206 -25 -131 34 -299 173 -492 78 -109 226 -276 252 -285
      34 -11 592 -7 725 6 385 37 702 109 1005 228 1184 466 1845 1595 1980 3378
      111 1460 -175 3438 -794 5498 -487 1617 -1035 2886 -1794 4152 -588 981 -1327
      1971 -2156 2890 -485 537 -1131 1183 -1656 1655 -1948 1753 -4176 3092 -6578
      3954 -1255 451 -2560 771 -3872 951 -527 72 -1033 120 -1650 156 -240 14
      -1455 20 -1715 9z"/>
      {/* 以下の path もすべて貼り付け */}
    </g>
  </svg>
);

const UserIcon = ({ style }: { style?: React.CSSProperties }) => (
  <svg viewBox="0 0 512 512" style={style}>
    {/* 修正した svg の path 群を貼り付け */}
    <path d="M256 512c-80 0-192-15.7-192-62.75 0-98.9 61-115.5 103-144.8 5.85 12.45 18.95 21.2 31.35 26.65 17.6 7.75 38.5 11.55 57.65 11.55s40.05-3.8 57.65-11.55c12.4-5.45 25.5-14.2 31.35-26.65 42 29.3 103 45.9 103 144.8 0 47.05-112 62.75-192 62.75z" fill="currentColor" />
    <path d="M256 0c91.7 0 122.3 64 122.3 128s-61.15 160-122.3 160c-61.15 0-122.3-80-122.3-160S164.3 0 256 0z" fill="currentColor" />
  </svg>
);

export default function BottomNavigation() {
  const pathname = usePathname();

  const navItems = [
    { name: 'お知らせ', href: '/announcements', Icon: NewsIcon },
    { name: 'イベント', href: '/events', Icon: EventIcon },
    { name: '会計', href: '/accounting', Icon: AccountingIcon },
    { name: '資産', href: '/assets', Icon: AssetIcon },
    { name: 'マイページ', href: '/members/profile', Icon: UserIcon },
  ];

  const ACTIVE_COLOR = '#00D1FF';
  const NORMAL_COLOR = '#9CA3AF';

  return (
    <nav style={baseStyles.bottomNavContainer}>
      {navItems.map((item) => {
        const isActive = pathname.startsWith(item.href);
        const currentColor = isActive ? ACTIVE_COLOR : NORMAL_COLOR;

        return (
          <Link
            key={item.href}
            href={item.href}
            style={{
              ...baseStyles.navItem,
              color: currentColor,
              ...(isActive ? baseStyles.navItemActive : {})
            }}
          >
            <item.Icon
              style={{
                width: '24px',
                height: '24px',
                marginBottom: '4px',
                color: currentColor
              }}
            />
            <span style={{ fontSize: '0.65rem' }}>
              {item.name}
            </span>
          </Link>
        );
      })}
    </nav>
  );
}