# お知らせ管理仕様

Filename: specs_announcements.md
Version: V1.0.0
Update: 2026-02-07
Remarks: V1.0.0 - 新規作成（実装済み機能のドキュメント化）

---

## 1. お知らせの構成要素

システムから会員へ通知される情報の基本属性。

### ● 基本属性
- **タイトル**（必須）
- **本文**（必須）
- **公開開始日**（必須）：この日付以降に一般公開される
- **公開対象**：
  - 全員
  - プレミアム会員限定
- **重要ピン留め**：
  - ON（一覧の上部に固定表示）
  - OFF（通常表示）
- **ステータス**：
  - 公開（Active）
  - 無効（Disabled）：一般一覧には表示されない

---

## 2. 権限とロール

お知らせ管理における操作権限。

### ● 一般ロール（Member）
- お知らせ一覧の参照
- お知らせ詳細の参照
- 未読・既読の判別表示

### ● お知らせ管理ロール（Admin / President / Vice-president）
- 会長、副会長、システム管理者、および指定された担当者が該当
- お知らせの新規作成・編集・削除
- 既読状況（誰が読んだか）の確認

---

# お知らせ管理ユースケース仕様

## 一般会員向け操作
### B-01：お知らせ一覧を参照する
- 公開開始日を過ぎた記事をリスト形式で確認する。
- 重要記事（ピン留め）は最上部に固定。
- その他は日付の降順で表示。
- 未読記事は「太字」、既読記事は「通常体」で出し分けを行う。

### B-02：お知らせ詳細を参照する
- 記事の本文を閲覧する。
- 添付ファイル（画像・PDF等）機能は、保存場所の課題解決まで未実装とする。

### B-03：既読を記録する
- 詳細画面を開いた際、自動的に「既読」としてシステムに記録。
- 同一ユーザーによる重複記録はDB制約により防止。

## 管理者向け操作
### B-11：お知らせを新規作成する
- 管理者パネルより遷移。
- タイトル、本文、公開開始日、対象、ピン留めを設定して投稿。

### B-12：お知らせを編集する
- 作成済みの内容、公開期間、ステータスを修正。

### B-13：お知らせを無効化する
- 編集画面にてステータスを「無効」に変更。論理削除扱い。

### B-14：お知らせを物理削除する
- DBからレコードを完全に消去。
- 関連する既読データもカスケード削除される。

### B-15：既読状況を確認する
- 管理者一覧にて記事ごとの既読数を表示。
- クリックで「誰がいつ読んだか」の詳細リストを表示。

---

## 画面遷移とルーティング

### 画面遷移図
```text
トップページ(プロファイル)
　↓　　↑
お知らせ一覧ページ (src/app/announcements/page.tsx)
　↑　　↓ (管理権限あり)
管理者向け一覧ページ (src/app/announcements/admin/page.tsx)
　↑　　↓ (新規作成)
新規記事作成画面 (src/app/announcements/new/page.tsx)